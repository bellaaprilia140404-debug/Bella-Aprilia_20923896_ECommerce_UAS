<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keranjang Belanja - Auréa & Co Fashion Store</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script defer src="js/script.js"></script>
    <style>
        /* Additional styles for checkout page */
        .checkout-section {
            padding: 5rem 0;
            margin-top: 80px;
            background: #f8f9fa;
        }
        
        .checkout-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
        }
        
        .cart-items-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }
        
        .checkout-form {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin: 0;
        }
        
        .cart-empty {
            text-align: center;
            padding: 3rem 2rem;
            color: #7f8c8d;
        }
        
        .cart-empty i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: #bdc3c7;
        }
        
        .cart-empty h3 {
            margin-bottom: 1rem;
            color: #7f8c8d;
        }
        
        .cart-empty a {
            background: #3498db;
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            display: inline-block;
            margin-top: 1rem;
            transition: background 0.3s ease;
        }
        
        .cart-empty a:hover {
            background: #2980b9;
        }
        
        .cart-summary {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding: 0.5rem 0;
        }
        
        .summary-row.total {
            border-top: 2px solid #ecf0f1;
            margin-top: 1rem;
            padding-top: 1rem;
            font-weight: 700;
            font-size: 1.2rem;
            color: #2c3e50;
        }
        
        .form-section {
            margin-bottom: 2rem;
        }
        
        .form-section h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .payment-options {
            display: grid;
            gap: 0.5rem;
        }
        
        .payment-option {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-option:hover {
            border-color: #3498db;
            background: #f8f9fa;
        }
        
        .payment-option input[type="radio"] {
            margin-right: 1rem;
        }
        
        .payment-option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .order-summary {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .order-summary h4 {
            color: #27ae60;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .shipping-info {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .shipping-info i {
            color: #856404;
        }
        
        @media (max-width: 768px) {
            .checkout-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .checkout-form {
                position: relative;
                top: auto;
            }
        }
    </style>
</head>
<body onload="displayCart()">
    <!-- Header Navigation -->
    <header>
        <nav class="navbar">
            <a href="Index.html" class="logo">Auréa & Co</a>
            <ul class="nav-links">
                <li><a href="Index.html">Home</a></li>
                <li><a href="Index.html#products">Products</a></li>
                <li><a href="Kontak.html">Contact</a></li>
                <li><a href="Checkout.html">Cart <span class="cart-counter">0</span></a></li>
            </ul>
        </nav>
    </header>

    <!-- Checkout Section -->
    <section class="checkout-section">
        <div class="checkout-container">
            <!-- Cart Items -->
            <div class="cart-items-section">
                <div class="section-header">
                    <i class="fas fa-shopping-cart"></i>
                    <h2 class="section-title">Keranjang Belanja</h2>
                </div>
                
                <div id="cart-items">
                    <!-- Cart items will be populated by JavaScript -->
                </div>
                
                <div class="cart-summary" id="cart-summary" style="display: none;">
                    <h4><i class="fas fa-calculator"></i> Ringkasan Belanja</h4>
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="subtotal">Rp 0</span>
                    </div>
                    <div class="summary-row">
                        <span>Ongkos Kirim:</span>
                        <span id="shipping-cost">Rp 15.000</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span id="cart-total">Rp 0</span>
                    </div>
                </div>
            </div>

            <!-- Checkout Form -->
            <div class="checkout-form">
                <div class="section-header">
                    <i class="fas fa-credit-card"></i>
                    <h3 class="section-title">Checkout</h3>
                </div>
                
                <!-- Shipping Information -->
                <div class="form-section">
                    <h4><i class="fas fa-truck"></i> Informasi Pengiriman</h4>
                    <div class="shipping-info">
                        <i class="fas fa-info-circle"></i>
                        <strong>Gratis ongkir</strong> untuk pembelian di atas Rp 500.000
                    </div>
                    <div class="form-group">
                        <label for="alamat">Alamat Lengkap</label>
                        <textarea id="alamat" name="alamat" placeholder="Masukkan alamat lengkap dengan kode pos..." required></textarea>
                    </div>
                </div>
                
                <!-- Payment Method -->
                <div class="form-section">
                    <h4><i class="fas fa-money-bill-wave"></i> Metode Pembayaran</h4>
                    <div class="payment-options">
                        <label class="payment-option">
                            <input type="radio" name="payment" value="Transfer Bank" required>
                            <div>
                                <strong><i class="fas fa-university"></i> Transfer Bank</strong><br>
                                <small>BCA, BRI, Mandiri, BNI</small>
                            </div>
                        </label>
                        
                        <label class="payment-option">
                            <input type="radio" name="payment" value="E-Wallet" required>
                            <div>
                                <strong><i class="fas fa-mobile-alt"></i> E-Wallet</strong><br>
                                <small>OVO, GoPay, Dana, ShopeePay</small>
                            </div>
                        </label>
                        
                        <label class="payment-option">
                            <input type="radio" name="payment" value="COD" required>
                            <div>
                                <strong><i class="fas fa-hand-holding-usd"></i> COD (Bayar di Tempat)</strong><br>
                                <small>Bayar tunai saat barang tiba</small>
                            </div>
                        </label>
                    </div>
                </div>
                
                <!-- Order Button -->
                <button class="cta-button" style="width: 100%;" onclick="completeCheckout()">
                    <i class="fas fa-lock"></i> Selesaikan Pesanan
                </button>
                
                <!-- Security Info -->
                <div style="text-align: center; margin-top: 1rem; color: #7f8c8d; font-size: 0.9rem;">
                    <i class="fas fa-shield-alt"></i> Transaksi Anda aman dan terlindungi
                </div>
            </div>
        </div>
    </section>

    <!-- Order Confirmation (Hidden by default) -->
    <section id="confirmation" style="display:none; padding: 3rem 0; background: #f8f9fa;">
        <div class="container">
            <div class="order-summary">
                <h4><i class="fas fa-check-circle"></i> Pesanan Berhasil!</h4>
                <div id="order-details"></div>
                <p style="margin-top: 1rem;">
                    <i class="fas fa-envelope"></i> Konfirmasi pesanan telah dikirim ke email Anda.
                </p>
                <a href="Index.html" class="cta-button" style="display: inline-block; margin-top: 1rem;">
                    <i class="fas fa-home"></i> Kembali ke Beranda
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-info">
                <h3>Auréa & Co Fashion Store</h3>
                <p>Your trusted partner for premium fashion and lifestyle products.</p>
            </div>
            
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <span>info@aurea-co.com</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <span>+62 812-3456-7890</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Jakarta, Indonesia</span>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Auréa & Co Fashion Store. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Enhanced displayCart function for checkout page
        function displayCart() {
            let cartItems = document.getElementById("cart-items");
            let cartTotal = document.getElementById("cart-total");
            let cartSummary = document.getElementById("cart-summary");
            let subtotalElement = document.getElementById("subtotal");
            let shippingCostElement = document.getElementById("shipping-cost");
            
            if (!cartItems) return;

            cartItems.innerHTML = "";
            let total = 0;
            const shippingCost = 15000;

            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="cart-empty">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Keranjang Belanja Kosong</h3>
                        <p>Belum ada produk yang ditambahkan ke keranjang.</p>
                        <a href="Index.html#products">
                            <i class="fas fa-shopping-bag"></i> Mulai Belanja
                        </a>
                    </div>
                `;
                if (cartSummary) cartSummary.style.display = "none";
                return;
            }

            // Group items by name
            const groupedItems = {};
            cart.forEach(item => {
                if (groupedItems[item.name]) {
                    groupedItems[item.name].quantity++;
                } else {
                    groupedItems[item.name] = { ...item, quantity: 1 };
                }
            });

            Object.values(groupedItems).forEach((item, index) => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.style.cssText = `
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 1.5rem;
                    border-bottom: 1px solid #ecf0f1;
                    gap: 1rem;
                `;
                
                cartItem.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 1rem; flex: 1;">
                        <img src="Images/product1.jpg.jpg" alt="${item.name}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px;">
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; color: #2c3e50;">${item.name}</h4>
                            <p style="margin: 0; color: #e74c3c; font-weight: 600;">Rp ${item.price.toLocaleString()}</p>
                            <p style="margin: 0.5rem 0 0 0; color: #7f8c8d; font-size: 0.9rem;">Qty: ${item.quantity}</p>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <p style="margin: 0 0 1rem 0; font-weight: 600; color: #2c3e50;">Rp ${(item.price * item.quantity).toLocaleString()}</p>
                        <button class="remove-btn" onclick="removeItemFromCart('${item.name}')" style="background: #e74c3c; color: white; border: none; padding: 0.5rem; border-radius: 50%; cursor: pointer;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                cartItems.appendChild(cartItem);
                total += item.price * item.quantity;
            });

            // Update summary
            if (subtotalElement) subtotalElement.textContent = `Rp ${total.toLocaleString()}`;
            
            const finalTotal = total >= 500000 ? total : total + shippingCost;
            if (total >= 500000) {
                shippingCostElement.innerHTML = `<span style="text-decoration: line-through;">Rp ${shippingCost.toLocaleString()}</span> <span style="color: #27ae60; font-weight: 600;">GRATIS!</span>`;
            } else {
                shippingCostElement.textContent = `Rp ${shippingCost.toLocaleString()}`;
            }
            
            if (cartTotal) cartTotal.textContent = `Rp ${finalTotal.toLocaleString()}`;
            if (cartSummary) cartSummary.style.display = "block";
            
            updateCartCounter();
        }

        // Remove specific item from cart
        function removeItemFromCart(itemName) {
            cart = cart.filter(item => item.name !== itemName);
            localStorage.setItem("cart", JSON.stringify(cart));
            displayCart();
            showNotification(`${itemName} dihapus dari keranjang`);
        }

        // Payment option selection
        document.addEventListener('DOMContentLoaded', function() {
            const paymentOptions = document.querySelectorAll('.payment-option');
            paymentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    paymentOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    this.querySelector('input[type="radio"]').checked = true;
                });
            });
        });

        // Enhanced checkout completion
        function completeCheckout() {
            let alamat = document.getElementById("alamat").value;
            let selectedPayment = document.querySelector('input[name="payment"]:checked');

            if (cart.length === 0) {
                showNotification("Keranjang masih kosong!");
                return;
            }
            if (!alamat.trim()) {
                showNotification("Silakan isi alamat pengiriman!");
                return;
            }
            if (!selectedPayment) {
                showNotification("Silakan pilih metode pembayaran!");
                return;
            }

            // Calculate total
            const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            const shipping = subtotal >= 500000 ? 0 : 15000;
            const total = subtotal + shipping;

            // Generate order number
            const orderNumber = 'AUR' + Date.now().toString().slice(-8);

            // Simpan item cart sebelum dihapus untuk konfirmasi
            const orderItems = [...cart];
            
            // Clear cart SEBELUM menampilkan konfirmasi
            cart = [];
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCounter();
            
            // Update tampilan cart menjadi kosong
            displayCart();

            // Tampilkan notifikasi sukses
            showNotification("🎉 Pesanan berhasil dibuat! Nomor pesanan: " + orderNumber);

            // Show confirmation
            document.getElementById('confirmation').style.display = 'block';
            document.querySelector('.checkout-section').style.display = 'none';
            
            document.getElementById('order-details').innerHTML = `
                <p><strong>Nomor Pesanan:</strong> ${orderNumber}</p>
                <p><strong>Total Pembayaran:</strong> Rp ${total.toLocaleString()}</p>
                <p><strong>Metode Pembayaran:</strong> ${selectedPayment.value}</p>
                <p><strong>Alamat Pengiriman:</strong> ${alamat}</p>
                <p><strong>Jumlah Item:</strong> ${orderItems.length} produk</p>
                <p><strong>Tanggal Pesanan:</strong> ${new Date().toLocaleDateString('id-ID')}</p>
                <p><strong>Estimasi Pengiriman:</strong> 2-4 hari kerja</p>
                <div style="margin-top: 1rem; padding: 1rem; background: #e8f5e8; border-radius: 8px;">
                    <p style="margin: 0; color: #27ae60; font-weight: 600;">
                        ✅ Pesanan Anda telah berhasil diproses!
                    </p>
                    <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem;">
                        Terima kasih telah berbelanja di <strong>Auréa & Co</strong>
                    </p>
                </div>
            `;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>

  <footer>
    <p>&copy; 2025 Auréa & Co</p>
  </footer>
</body>
</html>
